<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Editor - ZenCG</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./src/style.css" />
  </head>
  <body>
    <!-- Editor layout -->
    <div id="app">
      <div id="editor-body">
        <main id="viewport">
          <canvas id="viewport-canvas" aria-label="3D viewport"></canvas>
          <aside id="viewport-tools" aria-hidden="true">
            <canvas id="env-gizmo-canvas" aria-label="Environment gizmo"></canvas>
          </aside>
        </main>
        <button
          id="tools-toggle"
          class="edge-toggle edge-toggle-left"
          type="button"
          aria-label="Collapse tools panel"
          aria-pressed="false"
        >
          <span class="edge-toggle-icon" aria-hidden="true">&lt;</span>
        </button>
        <button
          id="panel-toggle"
          class="edge-toggle edge-toggle-right"
          type="button"
          aria-label="Collapse control panel"
          aria-pressed="false"
        >
          <span class="edge-toggle-icon" aria-hidden="true">&gt;</span>
        </button>
        <aside id="tools-island" aria-label="Transform and material tools">
          <div class="tools-header">
            <h2 class="panel-heading">Tools</h2>
          </div>
          <div class="tools-stack">
            <section class="tools-card" aria-label="Transform tools">
              <div id="transformation-panel-container"></div>
            </section>
            <section class="tools-card" aria-label="Material tools">
              <div id="material-panel-container"></div>
            </section>
          </div>
        </aside>
        <div id="panel-stack">
          <aside id="panel">
            <div id="panel-scroll">
              <nav id="panel-nav" aria-label="ZenCG navigation">
                <a class="panel-nav-title" href="/">ZenCG</a>
                <a class="panel-nav-link" href="/blog/">Blog</a>
              </nav>
              <section class="panel-section">
                <div class="panel-header-row">
                  <h2 class="panel-heading">Objects</h2>
                </div>
                <div class="object-list-container">
                  <div class="object-list-scroll">
                    <ul id="object-list" class="object-list"></ul>
                  </div>
                </div>
                <div class="panel-field">
                  <label for="object-name-input">Selected Name</label>
                  <input
                    id="object-name-input"
                    class="panel-text-input"
                    type="text"
                    placeholder="Select an object"
                    disabled
                  />
                </div>
              </section>
              <section class="panel-section">
                <div class="panel-header-row">
                  <h2 class="panel-heading">Import</h2>
                  <label for="obj-input" class="import-obj-button">
                    <span>Import OBJ</span>
                    <span class="import-obj-plus">+</span>
                  </label>
                </div>
                <input id="obj-input" class="file-input" type="file" accept=".obj,.mtl" multiple />
                <div class="library-import">
                  <label for="library-select">Model Library</label>
                  <div class="library-row">
                    <select id="library-select" disabled>
                      <option value="">Loading library...</option>
                    </select>
                    <button id="library-import" disabled>Import</button>
                  </div>
                </div>
              </section>
              <section class="panel-section">
                <div class="panel-header-row">
                  <h2 class="panel-heading">Actions</h2>
                </div>
                <div class="panel-field">
                  <label for="export-name-input">Export Filename</label>
                  <input
                    id="export-name-input"
                    class="panel-text-input"
                    type="text"
                    placeholder="zencg-export"
                  />
                </div>
                <div class="panel-toggle">
                  <input id="export-scene-toggle" type="checkbox" />
                  <label for="export-scene-toggle">Export Whole Scene</label>
                </div>
                <button id="obj-export" disabled>Export OBJ</button>
                <button id="obj-delete" disabled>Delete Selected</button>
                <p id="status">Waiting for OBJ file...</p>
              </section>
              <hr class="panel-divider" />
              <section class="panel-section history-section">
                <div class="panel-header-row">
                  <h2 class="panel-heading">History</h2>
                </div>
                <div class="history-scroll">
                  <ul id="action-history-list" class="history-list"></ul>
                </div>
              </section>
              <hr class="panel-divider" />
            </div>
          </aside>
          <div id="settings-island" role="group" aria-label="Editor actions">
            <button
              id="manual-button"
              class="island-action"
              type="button"
              aria-haspopup="dialog"
              aria-controls="manual-modal"
              aria-expanded="false"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M5 4.5C5 3.7 5.7 3 6.5 3H19v16.5c0 .8-.7 1.5-1.5 1.5H6.5c-.8 0-1.5-.7-1.5-1.5V4.5Zm2 .5v14.5h10.5V5H7Zm-1 0c0-.6.4-1 1-1h.5v15.5H7c-.6 0-1-.4-1-1V5Z"
                />
              </svg>
              <span>User Manual</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div
      id="manual-modal"
      class="manual-modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="manual-title"
      aria-hidden="true"
    >
      <div class="manual-card" role="document">
        <header class="manual-header">
          <div>
            <h2 id="manual-title" class="manual-title">User Manual</h2>
            <p class="manual-subtitle">ZenCG tutorials and information.</p>
          </div>
          <button class="manual-close" type="button" data-manual-close aria-label="Close user manual">
            Close
          </button>
        </header>
        <div class="manual-content">
          <div class="manual-grid">
            <section class="manual-section">
              <h3>Import</h3>
              <p>OBJ + optional MTL.</p>
            </section>
            <section class="manual-section">
              <h3>Select</h3>
              <p>Choose from the Objects list.</p>
            </section>
            <section class="manual-section">
              <h3>Transform</h3>
              <p>Use G / R / S or numeric inputs.</p>
            </section>
            <section class="manual-section">
              <h3>Materials</h3>
              <p>Base color + texture.</p>
            </section>
            <section class="manual-section">
              <h3>Component</h3>
              <p>Create Component split.</p>
            </section>
            <section class="manual-section">
              <h3>Export</h3>
              <p>Selected or whole scene.</p>
            </section>
            <section class="manual-section">
              <h3>Undo / Delete</h3>
              <p>Cmd/Ctrl+Z, Del / Backspace.</p>
            </section>
          </div>
        </div>
      </div>
    </div>
    <script type="importmap">
      {
        "imports": {
          "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
          "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
        }
      }
    </script>
    <script type="module" src="./src/app.js"></script>
  </body>
</html>
